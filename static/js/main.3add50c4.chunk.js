(this.webpackJsonpbudget=this.webpackJsonpbudget||[]).push([[0],{10:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return u}));var n=a(41),r=a.n(n),c=a(24),s=r.a.create({baseURL:"https://pietervdh-budget-api.herokuapp.com/api/",headers:{Authorization:"Bearer ".concat(localStorage.getItem(c.token_key))}}),u=function(e){e?s.defaults.headers.Authorization="Bearer ".concat(e):delete s.defaults.headers.Authorization}},24:function(e){e.exports=JSON.parse('{"base_url":"http://localhost:9000/api/","token_key":"auth_token"}')},25:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return o}));var n=a(2),r=a.n(n),c=a(3),s=a(10),u=function(){var e=Object(c.a)(r.a.mark((function e(t,a){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.post("users/login",{email:t,password:a});case 2:return n=e.sent,c=n.data,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),i=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n,c,u,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,n=t.email,c=t.password,e.next=3,s.a.post("users/register",{name:a,email:n,password:c});case 3:return u=e.sent,i=u.data,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("users/".concat(t));case 2:return a=e.sent,n=a.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},48:function(e,t,a){},49:function(e,t,a){},7:function(e,t,a){"use strict";(function(e){a.d(t,"e",(function(){return x})),a.d(t,"b",(function(){return h})),a.d(t,"c",(function(){return m})),a.d(t,"d",(function(){return v})),a.d(t,"a",(function(){return g}));var n=a(2),r=a.n(n),c=a(3),s=a(5),u=a(1),i=a(25),o=a(10),l=a(24),b=a(0),d=l.token_key,j=Object(u.createContext)();function p(t){if(!t)return{};var a=t.split(".")[1],n=e.from(a,"base64").toString("ascii");return JSON.parse(n)}function O(e){return e?("number"!==typeof e&&(e=Number(e)),isNaN(e)?null:new Date(1e3*e)):null}var f=function(){return Object(u.useContext)(j)},x=function(){var e=f(),t=e.token,a=e.user,n=e.ready,r=e.loading,c=e.error,s=e.hasRole;return{token:t,user:a,ready:n,error:c,loading:r,isAuthed:Boolean(t),hasRole:s}},h=function(){return f().login},m=function(){return f().logout},v=function(){return f().register},g=function(e){var t=e.children,a=Object(u.useState)(!1),n=Object(s.a)(a,2),l=n[0],f=n[1],x=Object(u.useState)(!1),h=Object(s.a)(x,2),m=h[0],v=h[1],g=Object(u.useState)(""),y=Object(s.a)(g,2),w=y[0],k=y[1],N=Object(u.useState)(localStorage.getItem(d)),C=Object(s.a)(N,2),S=C[0],_=C[1],P=Object(u.useState)(null),T=Object(s.a)(P,2),q=T[0],I=T[1],V=Object(u.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(t,a){var n,c,s,u,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p(t),c=n.exp,s=n.userId,u=O(c),(l=u>=new Date)?localStorage.setItem(d,t):(localStorage.removeItem(d),t=null),o.b(t),_(t),f(t&&l),a||!l){e.next=11;break}return e.next=10,i.a(s);case 10:a=e.sent;case 11:I(a);case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[]);Object(u.useEffect)((function(){V(S)}),[S,V]);var A=Object(u.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(t,a){var n,c,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(!0),k(null),e.next=5,i.b(t,a);case 5:return n=e.sent,c=n.token,s=n.user,e.next=10,V(c,s);case 10:return e.abrupt("return",!0);case 13:return e.prev=13,e.t0=e.catch(0),console.error(e.t0),k("Login failed, try again"),e.abrupt("return",!1);case 18:return e.prev=18,v(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[0,13,18,21]])})));return function(t,a){return e.apply(this,arguments)}}(),[V]),F=Object(u.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(!0),k(null),e.next=5,i.c(t);case 5:return a=e.sent,n=a.token,c=a.user,e.next=10,V(n,c);case 10:return e.abrupt("return",!0);case 13:return e.prev=13,e.t0=e.catch(0),k(e.t0),e.abrupt("return",!1);case 17:return e.prev=17,v(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,13,17,20]])})));return function(t){return e.apply(this,arguments)}}(),[V]),D=Object(u.useCallback)((function(){V(null,null)}),[V]),R=Object(u.useCallback)((function(e){return!!q&&q.roles.includes(e)}),[q]),L=Object(u.useMemo)((function(){return{token:S,user:q,ready:l,loading:m,error:w,login:A,logout:D,register:F,hasRole:R}}),[S,q,l,m,w,A,D,F,R]);return Object(b.jsx)(j.Provider,{value:L,children:t})}}).call(this,a(71).Buffer)},79:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(40),s=a.n(c),u=(a(48),a(49),a(16)),i=a(4),o=a(6),l=a(9),b=a(18),d=a(0),j=Object(n.memo)((function(e){var t=e.index,a=e.selected,r=void 0!==a&&a,c=e.onSelect,s=void 0===c?function(e){return e}:c,u=Object(n.useCallback)((function(){return s(t+1)}),[t,s]);return Object(d.jsx)(b.c,{color:r?"yellow":"grey",className:"inline-block",onClick:u})}));function p(e){var t=e.totalStars,a=void 0===t?5:t,r=e.selectedStars,c=void 0===r?0:r,s=e.onRate,u=Object(n.useMemo)((function(){return Object(l.a)(new Array(a))}),[a]);return Object(d.jsxs)(d.Fragment,{children:[u.map((function(e,t){return Object(d.jsx)(j,{index:t,selected:c>t,onSelect:s},t)})),Object(d.jsxs)("p",{className:"text-xs text-gray-700",children:[c," of ",a," stars"]})]})}var O=a(2),f=a.n(O),x=a(3),h=a(5),m=a(10),v=function(){var e=Object(x.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("places");case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(x.a)(f.a.mark((function e(t){var a,n,r,c,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,n=t.name,r=t.rating,e.next=3,Object(m.a)({method:a?"put":"post",url:"places/".concat(null!==a&&void 0!==a?a:""),data:{name:n,rating:r}});case 3:return c=e.sent,s=c.data,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(x.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.delete("places/".concat(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=a(7),k=Object(n.createContext)(),N=function(){return Object(n.useContext)(k)},C=function(e){var t=e.children,a=Object(w.e)().ready,r=Object(n.useState)({}),c=Object(h.a)(r,2),s=c[0],u=c[1],i=Object(n.useState)(),l=Object(h.a)(i,2),b=l[0],j=l[1],p=Object(n.useState)(!1),O=Object(h.a)(p,2),m=O[0],N=O[1],C=Object(n.useState)(!1),S=Object(h.a)(C,2),_=S[0],P=S[1],T=Object(n.useState)([]),q=Object(h.a)(T,2),I=q[0],V=q[1],A=Object(n.useCallback)(Object(x.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(),N(!0),e.next=5,v();case 5:return t=e.sent,V(t.data),e.abrupt("return",t.data);case 10:e.prev=10,e.t0=e.catch(0),j(e.t0);case 13:return e.prev=13,N(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])}))),[]);Object(n.useEffect)((function(){a&&!_&&(A(),P(!0))}),[a,_,A]);var F=Object(n.useCallback)(function(){var e=Object(x.a)(f.a.mark((function e(t){var a,n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,n=t.name,r=t.rating,j(),N(!0),e.prev=3,e.next=6,g({id:a,name:n,rating:r});case 6:return c=e.sent,e.next=9,A();case 9:return e.abrupt("return",c);case 12:throw e.prev=12,e.t0=e.catch(3),console.error(e.t0),e.t0;case 16:return e.prev=16,N(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,12,16,19]])})));return function(t){return e.apply(this,arguments)}}(),[A]),D=Object(n.useCallback)(function(){var e=Object(x.a)(f.a.mark((function e(t,a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=I.find((function(e){return e.id===t})),e.next=3,F(Object(o.a)(Object(o.a)({},n),{},{rating:a}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[I,F]),R=Object(n.useCallback)(function(){var e=Object(x.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),j(),e.prev=2,e.next=5,y(t);case 5:A(),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),console.error(e.t0),e.t0;case 12:return e.prev=12,N(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,8,12,15]])})));return function(t){return e.apply(this,arguments)}}(),[A]),L=Object(n.useMemo)((function(){return{currentPlace:s,setCurrentPlace:u,places:I,error:b,loading:m,ratePlace:D,deletePlace:R,createOrUpdatePlace:F}}),[I,b,m,u,D,R,s,F]);return Object(d.jsx)(k.Provider,{value:L,children:t})},S=Object(n.memo)((function(e){var t=e.id,a=e.name,r=e.rating,c=N().ratePlace,s=Object(n.useCallback)((function(e){c(t,e)}),[c,t]);return Object(d.jsxs)("div",{"data-cy":"place",className:"bg-white px-4 py-5 border-2 border-gray-400 rounded m-2 text-center",children:[Object(d.jsx)("h2",{className:"mt-2 mb-2 font-bold",children:a}),Object(d.jsx)(p,{selectedStars:r,onRate:s})]})}));function _(e){var t=e.places;return Object(d.jsx)("div",{className:"flex flex-wrap",children:t.sort((function(e,t){return e.name.toUpperCase().localeCompare(t.name.toUpperCase())})).map((function(e){return Object(d.jsx)(S,Object(o.a)({},e),e.id)}))})}function P(){var e=N().places;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h1",{children:"Places"}),Object(d.jsx)(_,{places:e})]})}var T=function(){var e=Object(x.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("transactions",{params:{limit:25,offset:0}});case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(x.a)(f.a.mark((function e(t){var a,n,r,c,s,u,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,n=t.placeId,r=t.amount,c=t.date,s=t.user,e.next=3,Object(m.a)({method:a?"put":"post",url:"transactions/".concat(null!==a&&void 0!==a?a:""),data:{placeId:n,amount:r,date:c,user:s}});case 3:return u=e.sent,i=u.data,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(x.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.delete("transactions/".concat(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=Object(n.createContext)(),A=function(e){var t=e.children,a=Object(w.e)().ready,r=Object(n.useState)([]),c=Object(h.a)(r,2),s=c[0],u=c[1],i=Object(n.useState)(),o=Object(h.a)(i,2),l=o[0],b=o[1],j=Object(n.useState)(!1),p=Object(h.a)(j,2),O=p[0],m=p[1],v=Object(n.useState)(!1),g=Object(h.a)(v,2),y=g[0],k=g[1],N=Object(n.useState)({}),C=Object(h.a)(N,2),S=C[0],_=C[1],P=Object(n.useCallback)(Object(x.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(),m(!0),e.next=5,T();case 5:t=e.sent,u(t.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),b(e.t0);case 12:return e.prev=12,m(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])}))),[]);Object(n.useEffect)((function(){a&&!y&&(P(),k(!0))}),[a,y,P]);var A=Object(n.useCallback)(function(){var e=Object(x.a)(f.a.mark((function e(t){var a,n,r,c,s,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,n=t.placeId,r=t.amount,c=t.date,s=t.user,b(),m(!0),e.prev=3,e.next=6,q({id:a,placeId:n,amount:r,date:c,user:s});case 6:return u=e.sent,e.next=9,P();case 9:return e.abrupt("return",u);case 12:throw e.prev=12,e.t0=e.catch(3),console.log(e.t0),e.t0;case 16:return e.prev=16,m(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,12,16,19]])})));return function(t){return e.apply(this,arguments)}}(),[P]),F=Object(n.useCallback)(function(){var e=Object(x.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(),m(!0),e.next=5,I(t);case 5:P(),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(0),console.log(e.t0),e.t0;case 12:return e.prev=12,m(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,8,12,15]])})));return function(t){return e.apply(this,arguments)}}(),[P]),D=Object(n.useCallback)((function(e){_(null===e?{}:s.find((function(t){return t.id===e})))}),[s]),R=Object(n.useMemo)((function(){return{transactions:s,error:l,loading:O,currentTransaction:S,createOrUpdateTransaction:A,deleteTransaction:F,setTransactionToUpdate:D}}),[s,l,O,S,A,F,D]);return Object(d.jsx)(V.Provider,{value:R,children:t})},F=a(13),D=a(21),R=["label","type","defaultValue","validation"],L=function(e){var t=e.label,a=e.type,n=e.defaultValue,r=e.validation,c=Object(D.a)(e,R),s=Object(F.c)(),u=s.register,i=s.formState.errors;return Object(d.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[Object(d.jsx)("label",{htmlFor:t,children:t}),Object(d.jsx)("input",Object(o.a)(Object(o.a)({},u(t,r)),{},{defaultValue:n,placeholder:t,type:a,id:t,name:t},c)),i[t]&&Object(d.jsx)("p",{"data-cy":"labelinput-error",className:"text-red-500",children:i[t].message})]})},M=["label","options","validation"],U=function(e){var t=e.label,a=e.options,n=e.validation,r=Object(D.a)(e,M),c=Object(F.c)(),s=c.register,u=c.formState.errors;return Object(d.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[Object(d.jsx)("label",{htmlFor:t,children:t}),Object(d.jsxs)("select",Object(o.a)(Object(o.a)(Object(o.a)({},s(t,n)),r),{},{id:t,name:t,children:[Object(d.jsxs)("option",{value:"",children:["--choose a ",t,"--"]}),a.map((function(e){return Object(d.jsx)("option",{value:e.id,children:e.name},e.id)}))]})),u[t]&&Object(d.jsx)("p",{className:"text-red-500",children:u[t].message})]})},B={user:{required:"this is required",minLength:{value:2,message:"Min length is 2"}},date:{required:"this is required"},place:{required:"this is required"},amount:{valueAsNumber:!0,required:"this is required",min:{value:1,message:"min 1"},max:{value:5e3,message:"max 5000"}}},E=function(e){if(!e)return null;typeof e!==Object&&(e=new Date(e));var t=e.toISOString();return t.substring(0,t.indexOf("T"))};function J(){var e=Object(i.i)().id,t=Object(w.e)().user,a=Object(i.g)(),r=Object(F.b)(),c=r.handleSubmit,s=r.reset,l=r.setValue,b=Object(n.useContext)(V),j=b.currentTransaction,p=b.setTransactionToUpdate,O=b.createOrUpdateTransaction,h=Object(n.useContext)(k).places;Object(n.useEffect)((function(){if(!j||0===Object.keys(j).length&&j.constructor===Object)s(),l("user",null===t||void 0===t?void 0:t.name);else{var e=E(new Date(j.date));l("date",e),l("user",j.user.name),l("place",j.place.id),l("amount",j.amount)}}),[j,t,l,s]),Object(n.useEffect)((function(){p(e)}),[e,p]);var m=Object(n.useCallback)(function(){var e=Object(x.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O({id:null===j||void 0===j?void 0:j.id,placeId:t.place,amount:t.amount,date:new Date(t.date),user:t.user});case 3:p(null),a.push("/transactions"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[O,null===j||void 0===j?void 0:j.id,p,a]);return Object(d.jsx)(F.a,Object(o.a)(Object(o.a)({},r),{},{children:Object(d.jsx)("form",{onSubmit:c(m),className:"m-5",children:Object(d.jsxs)("div",{className:"grid grid-cols-6 gap-6",children:[Object(d.jsx)(L,{label:"user",type:"text",defaultValue:"",disabled:!0,validation:B.user,"data-cy":"user_input"}),Object(d.jsx)(L,{label:"date",type:"date",defaultValue:E(new Date),validation:B.date,"data-cy":"date_input"}),Object(d.jsx)(U,{label:"place",options:h,validation:B.place,"data-cy":"place_input"}),Object(d.jsx)(L,{label:"amount",type:"number",defaultValue:"0",validation:B.amount,"data-cy":"amount_input"}),Object(d.jsx)("div",{className:"col-span-12 sm:col-span-6",children:Object(d.jsxs)("div",{className:"flex justify-end",children:[Object(d.jsx)("button",{type:"submit","data-cy":"submit_transaction",children:(null===j||void 0===j?void 0:j.id)?"Save transaction":"Add transaction"}),Object(d.jsx)(u.b,{className:"button",to:"/transactions",children:"Cancel"})]})})]})})}))}var z=Object(n.memo)((function(e){var t=e.id,a=e.date,r=e.amount,c=e.user,s=e.place,i=Object(n.useContext)(V).deleteTransaction,o=Object(n.useCallback)((function(){i(t)}),[i,t]);return Object(d.jsxs)("tr",{"data-cy":"transaction",children:[Object(d.jsx)("td",{"data-cy":"transaction_date",className:"border w-1/4 px-4 py-2",children:new Date(a).toLocaleDateString("nl-BE",{day:"2-digit",month:"2-digit",year:"numeric"})}),Object(d.jsx)("td",{"data-cy":"transaction_user",className:"border w-1/4 px-4 py-2",children:c.name}),Object(d.jsx)("td",{"data-cy":"transaction_place",className:"border w-1/4 px-4 py-2",children:s.name}),Object(d.jsxs)("td",{"data-cy":"transaction_amount",className:"border w-1/4 px-4 py-2",children:[r," \u20ac"]}),Object(d.jsx)("td",{className:"border w-1/4 px-4 py-2",children:Object(d.jsxs)("div",{className:"flex flex-row space-x-2",children:[Object(d.jsx)(u.b,{className:"button","data-cy":"transaction_edit_btn",to:"/transactions/edit/".concat(t),children:Object(d.jsx)(b.b,{})}),Object(d.jsx)("button",{"data-cy":"transaction_remove_btn",onClick:o,children:Object(d.jsx)(b.d,{})})]})})]})}));function W(e){var t=e.search,a=Object(n.useContext)(V),r=a.transactions,c=a.error,s=a.loading,i=Object(n.useMemo)((function(){return r.filter((function(e){return e.place.name.toLowerCase().includes(t.toLowerCase())}))}),[r,t]);return s?Object(d.jsx)("h1",{"data-cy":"loading",children:"Loading..."}):c?Object(d.jsx)("p",{"data-cy":"transactions_error",className:"error",children:JSON.stringify(c,null,2)}):r&&r.length?Object(d.jsxs)("table",{className:"table-fixed m-auto",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Date"}),Object(d.jsx)("th",{children:"User"}),Object(d.jsx)("th",{children:"What?"}),Object(d.jsx)("th",{children:"Amount"}),Object(d.jsx)("th",{})]})}),Object(d.jsx)("tbody",{children:i.map((function(e){return Object(d.jsx)(z,Object(o.a)({},e),e.id)}))})]}):Object(d.jsxs)("p",{className:"info flex flex-row items-center",children:[Object(d.jsx)("span",{className:"flex-1",children:"There are no transactions"}),Object(d.jsx)(u.b,{to:"add",className:"button",children:"Create one"})]})}function Y(){var e=Object(n.useState)(""),t=Object(h.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),s=Object(h.a)(c,2),i=s[0],o=s[1],l=Object(n.useCallback)((function(e){return r(e.target.value)}),[]),j=Object(n.useCallback)((function(){return o(a)}),[a]);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h1",{children:"Transactions"}),Object(d.jsxs)("div",{className:"flex my-4",children:[Object(d.jsx)("input",{"data-cy":"transactions_search_input",type:"search",value:a,onChange:l,className:"flex-1",placeholder:"Search for a transaction"}),Object(d.jsx)("button",{type:"button","data-cy":"transactions_search_btn",onClick:j,children:"Search"})]}),Object(d.jsx)("div",{className:"flex justify-end my-2",children:Object(d.jsxs)(u.b,{className:"button flex flex-row items-center",to:"/transactions/add",children:[Object(d.jsx)(b.a,{})," New transaction"]})}),Object(d.jsx)(W,{search:i})]})}var G=function(e){var t=e.to,a=e.label;return Object(d.jsx)("span",{children:Object(d.jsx)(u.c,{to:t,className:"hover:text-blue-500",activeClassName:"text-blue-500 cursor-default",children:a})})};function H(){var e=Object(w.e)().isAuthed,t=Object(w.c)(),a=Object(n.useCallback)((function(){t()}),[t]);return Object(d.jsx)("div",{className:"mb-6",children:Object(d.jsxs)("nav",{className:"flex space-x-6",children:[e?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(G,{to:"/transactions",label:"Transactions"}),Object(d.jsx)(G,{to:"/places",label:"Places"})]}):null,Object(d.jsx)("div",{className:"flex-1"}),e?Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("button",{onClick:a,children:"Sign out"})}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(G,{to:"/login",label:"Sign in"}),Object(d.jsx)(G,{to:"/register",label:"Register"})]})]})})}var K={email:{required:!0},password:{required:!0}};function Q(){var e=Object(i.g)(),t=Object(w.e)(),a=t.loading,r=t.error,c=t.isAuthed,s=Object(w.b)(),u=Object(F.b)(),l=u.handleSubmit,b=u.reset,j=Object(n.useCallback)(function(){var t=Object(x.a)(f.a.mark((function t(a){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.email,r=a.password,t.next=3,s(n,r);case 3:t.sent&&e.replace("/");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e,s]),p=Object(n.useCallback)((function(){b()}),[b]);return c?Object(d.jsx)(i.a,{from:"/login",to:"/"}):Object(d.jsx)(F.a,Object(o.a)(Object(o.a)({},u),{},{children:Object(d.jsxs)("div",{className:"mx-auto w-1/4",children:[Object(d.jsx)("h1",{children:"Sign in"}),Object(d.jsxs)("form",{className:"grid grid-cols-1 gap-y-4",onSubmit:l(j),children:[r?Object(d.jsx)("p",{className:"text-red-500",children:r}):null,Object(d.jsx)(L,{label:"email",type:"text",defaultValue:"","data-cy":"email_input",placeholder:"your@email.com",validation:K.email}),Object(d.jsx)(L,{label:"password",type:"password",defaultValue:"","data-cy":"password_input",validation:K.password}),Object(d.jsxs)("div",{className:"flex flex-row justify-end",children:[Object(d.jsx)("button",{"data-cy":"submit_btn",type:"submit",disabled:a,className:"disabled:opacity-50",children:"Sign in"}),Object(d.jsx)("button",{type:"button",onClick:p,children:"Cancel"})]})]})]})}))}var X=["children","role"];function Z(e){var t=e.children,a=e.role,r=Object(D.a)(e,X),c=Object(w.e)(),s=c.isAuthed,u=c.hasRole,l=Object(i.h)().pathname,b=Object(n.useMemo)((function(){return a?s&&u(a):s}),[s,a,u]);return Object(d.jsx)(i.b,Object(o.a)(Object(o.a)({},r),{},{children:b?t:Object(d.jsx)(i.a,{from:l,to:"/login"})}))}function $(){var e=Object(i.g)(),t=Object(w.e)(),a=t.loading,r=t.error,c=t.isAuthed,s=Object(w.d)(),u=Object(F.b)(),l=u.handleSubmit,b=u.reset,j=u.getValues,p=Object(n.useCallback)(function(){var t=Object(x.a)(f.a.mark((function t(a){var n,r,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.name,r=a.email,c=a.password,t.next=3,s({name:n,email:r,password:c});case 3:t.sent&&e.replace("/");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e,s]),O=Object(n.useCallback)((function(){b()}),[b]),h=Object(n.useMemo)((function(){return{name:{required:!0},email:{required:!0},password:{required:!0},confirmPassword:{required:!0,validate:{notIdentical:function(e){return j("password")===e?null:"Both passwords need to be identical"}}}}}),[j]);return c?Object(d.jsx)(i.a,{from:"/register",to:"/"}):Object(d.jsx)(F.a,Object(o.a)(Object(o.a)({},u),{},{children:Object(d.jsxs)("div",{className:"mx-auto w-1/4",children:[Object(d.jsx)("h1",{children:"Register"}),Object(d.jsxs)("form",{className:"grid grid-cols-1 gap-y-4",onSubmit:l(p),children:[r?Object(d.jsx)("p",{className:"text-red-500",children:JSON.stringify(r)}):null,Object(d.jsx)(L,{label:"name",type:"text",defaultValue:"",placeholder:"Your Name",validation:h.name}),Object(d.jsx)(L,{label:"email",type:"email",defaultValue:"",placeholder:"your@email.com",validation:h.email}),Object(d.jsx)(L,{label:"password",type:"password",defaultValue:"",validation:h.password}),Object(d.jsx)(L,{label:"confirmPassword",type:"password",defaultValue:"",validation:h.confirmPassword}),Object(d.jsxs)("div",{className:"flex flex-row justify-end",children:[Object(d.jsx)("button",{type:"submit",disabled:a,className:"disabled:opacity-50",children:"Register"}),Object(d.jsx)("button",{type:"button",onClick:O,children:"Cancel"})]})]})]})}))}var ee=function(){return Object(d.jsx)(w.a,{children:Object(d.jsx)(C,{children:Object(d.jsx)(A,{children:Object(d.jsxs)(u.a,{children:[Object(d.jsx)(H,{}),Object(d.jsxs)(i.d,{children:[Object(d.jsx)(i.b,{path:"/",exact:!0,children:Object(d.jsx)(i.a,{to:"/transactions"})}),Object(d.jsx)(Z,{path:"/transactions",exact:!0,children:Object(d.jsx)(Y,{})}),Object(d.jsx)(Z,{path:"/transactions/add",exact:!0,children:Object(d.jsx)(J,{})}),Object(d.jsx)(Z,{path:"/transactions/edit/:id",exact:!0,children:Object(d.jsx)(J,{})}),Object(d.jsx)(Z,{path:"/places",children:Object(d.jsx)(P,{})}),Object(d.jsx)(i.b,{path:"/login",children:Object(d.jsx)(Q,{})}),Object(d.jsx)(i.b,{path:"/register",children:Object(d.jsx)($,{})})]})]})})})})},te=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,80)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};s.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(ee,{})}),document.getElementById("root")),te()}},[[79,1,2]]]);
//# sourceMappingURL=main.3add50c4.chunk.js.map